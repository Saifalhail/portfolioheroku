{% load static %}
<div id="ajax-page" class="ajax-page-content">
  <div class="ajax-page-wrapper">
    <div class="ajax-page-nav">
      <div class="nav-item ajax-page-prev-next">
        <a class="ajax-page-load" href="{% url 'data_manipulation' %}"
          ><i class="lnr lnr-chevron-left"></i
        ></a>
        <a class="ajax-page-load" href="{% url 'neural_network' %}"
          ><i class="lnr lnr-chevron-right"></i
        ></a>
      </div>
      <div class="nav-item ajax-page-close-button">
        <a id="ajax-page-close-button" href="#"
          ><i class="lnr lnr-cross"></i
        ></a>
      </div>
    </div>

    <div class="ajax-page-title">
      <h1>Web Scraping and Filtering</h1>
    </div>

    <div class="row">
      <div class="col-sm-8 col-md-8 portfolio-block">
        <!-- <div class="owl-carousel portfolio-page-carousel"> -->
        <div class="item">
          <p>
            The objective of this program is to quickly, daily, and efficiently
            run to rapidly gather data from different sources. It extracts
            financial information from other data formats by manipulating this
            data and re-formating it, then restructuring it; it can be used for
            further data handling and as input for different networks. All types
            of information can be retrieved using this program.
          </p>
        </div>
        <div class="item">
          <p>
            This program was custom-made to fit different types of data and data
            formats. This Scraper works with digital data and can retrieve and
            clean information from other sources.
          </p>
        </div>
        <div class="item">
          <p>
            The information gathered is financial information that is then used
            as input within Pandas DF to represent data cleanly. While
            displaying the information is done through javascript by organizing
            it as a table.
          </p>
          <!-- <ul>
                        {% for i in test3 %}
                        <li>{{i}}</li>
                        {% endfor %}
                    </ul> -->

          <button type="button" id="runBtn" style="cursor: pointer">RUN</button>
          <div
            id="lineChart"
            class="d-none"
            style="background-color: #fff; padding: 10px; border-radius: 8px"
          >
            <div class="preloader-spinner d-none"></div>

            <table id="dataTable"></table>
          </div>

          <!-- <img src="{% static 'img/results/result.png' %}" alt="Result not yet" /> -->
        </div>

        <!-- </div> -->

        <!-- <div class="portfolio-page-video embed-responsive embed-responsive-16by9">
                  <iframe class="embed-responsive-item" src="https://player.vimeo.com/video/97102654?autoplay=0"></iframe>
                </div> -->

        <script type="text/javascript">
          var myChart = false;
          jQuery(document).ready(function ($) {
            $(".portfolio-page-carousel").imagesLoaded(function () {
              $(".portfolio-page-carousel").owlCarousel({
                smartSpeed: 1200,
                items: 1,
                loop: true,
                dots: true,
                nav: true,
                navText: false,
                margin: 10,
                autoHeight: true,
              });
            });

            $("#runBtn").click(function () {
              renderChart();
            });
          });

          function renderChart() {
            $("#runBtn").attr("disabled", "disabled");
            if ($.fn.dataTable.isDataTable("#dataTable")) {
              $("#dataTable").DataTable().destroy();
              $("#dataTable").empty();
            }
            // Show loader for chart area
            $("#lineChart").removeClass("d-none");
            $(".preloader-spinner").removeClass("d-none");
            let csvFile = $("#csvFilesFilter option:selected").text();

            $.post("{% url 'web_scraping' %}", function (response) {
              $("#runBtn").removeAttr("disabled");
              let columns = [];
              response.result.columns.forEach((col) => {
                columns.push({ title: col });
              });

              // Hide the loader into Chart area
              $(".preloader-spinner").addClass("d-none");
              $("#dataTable").DataTable({
                searching: false,
                ordering: false,
                scrollX: true,
                columns: columns,
                data: response.result.data,
              });
            });
          }
        </script>
      </div>

      <div class="col-sm-4 col-md-4 portfolio-block">
        <!-- Project Description -->
        <div class="project-description">
          <div class="block-title">
            <h3>Description</h3>
          </div>
          <ul class="project-general-info">
            <li>
              <p><i class="fa fa-user"></i> Saif Alhail</p>
            </li>
            <!-- <li>
              <p>
                <i class="fa fa-globe"></i>
                <a href="#" target="_blank">www.project-site.com</a>
              </p>
            </li> -->
            <li>
              <p><i class="fa fa-calendar"></i> 2020</p>
            </li>
          </ul>

          <p class="text-justify">
            This program uses web scraping technology. It has been implemented
            in a way where a few different websites are used that display other
            financial information. All data is extracted, cleaned, and presented
            in Tables using Pandas data frames.
            <br>
            All Projects created here are done only by Saif Alhail.<br> 
            All rights are reserved, Saif Alhail
          </p>
          <!-- /Project Description -->

          <!-- Technology -->
          <div class="tags-block">
            <div class="block-title">
              <h3>Technology</h3>
            </div>
            <ul class="tags">
              <li><a>Pandas</a></li>
              <li><a>Scraper</a></li>
              <li><a>Pickles</a></li>
              <li><a>OS</a></li>
              <li><a>Numpy</a></li>
            </ul>
          </div>
          <!-- /Technology -->

          <!-- Share Buttons -->
          <div class="btn-group share-buttons">
            <div class="block-title">
              <h3>Share</h3>
            </div>
            <a
              href="https://www.linkedin.com/in/saifalhail/"
              target="_blank"
              class="btn"
              ><i class="fab fa-linkedin"></i>
            </a>
            <!-- <a href="#" target="_blank" class="btn"><i class="fab fa-twitter"></i> </a> -->
            <!-- <a href="#" target="_blank" class="btn"><i class="fab fa-dribbble"></i> </a> -->
          </div>
          <!-- /Share Buttons -->
        </div>
        <!-- Project Description -->
      </div>
    </div>
  </div>
</div>
